(()=>{"use strict";var e,r,s,t,o,i,n={304319:(e,r,s)=>{s.d(r,{default:()=>t});const t=(0,s(28178).makeIcon)("Icon16Verified","verified_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="verified_16"><path fill="currentColor" d="M4.5 9.586 2.957 8.043a1 1 0 0 0-1.414 1.414l2.25 2.25a1 1 0 0 0 1.414 0l5.25-5.25a1 1 0 0 0-1.414-1.414L4.5 9.586Z" /></symbol>',16,16,!1,void 0)},978281:(e,r,s)=>{s.d(r,{default:()=>t});const t=(0,s(28178).makeIcon)("Icon24AddSquareOutline","add_square_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="add_square_outline_24"><path fill="currentColor" fill-rule="evenodd" d="M12 7a.9.9 0 0 1 .9.9v3.2h3.2a.9.9 0 0 1 .9.9.9.9 0 0 1-.9.9h-3.2v3.2a.9.9 0 0 1-.9.9.9.9 0 0 1-.9-.9v-3.2H7.9A.9.9 0 0 1 7 12a.9.9 0 0 1 .9-.9h3.2V7.9A.9.9 0 0 1 12 7ZM9.462 3h5.076c.948 0 1.714 0 2.334.05.64.053 1.203.163 1.726.43a4.4 4.4 0 0 1 1.923 1.922c.266.523.376 1.087.428 1.726.051.62.051 1.386.051 2.334v5.076c0 .948 0 1.714-.05 2.334-.053.64-.163 1.203-.43 1.726a4.4 4.4 0 0 1-1.922 1.922c-.523.267-1.087.377-1.726.43-.62.05-1.386.05-2.334.05H9.462c-.948 0-1.714 0-2.334-.05-.64-.053-1.203-.163-1.725-.43a4.4 4.4 0 0 1-1.923-1.922c-.267-.523-.377-1.087-.43-1.726C3 16.252 3 15.486 3 14.538V9.462c0-.948 0-1.714.05-2.334.053-.64.163-1.203.43-1.726A4.4 4.4 0 0 1 5.403 3.48c.522-.267 1.086-.377 1.725-.43C7.748 3 8.514 3 9.462 3ZM7.275 4.845c-.528.043-.829.123-1.055.238A2.6 2.6 0 0 0 5.083 6.22c-.115.226-.195.527-.238 1.054C4.8 7.813 4.8 8.505 4.8 9.5v5c0 .995 0 1.687.045 2.225.043.528.123.83.238 1.055a2.6 2.6 0 0 0 1.137 1.137c.226.115.527.195 1.054.238.539.044 1.231.045 2.226.045h5c.995 0 1.687 0 2.225-.045.528-.043.83-.123 1.055-.238a2.6 2.6 0 0 0 1.137-1.137c.115-.226.195-.527.238-1.055.044-.538.045-1.23.045-2.225v-5c0-.995 0-1.687-.045-2.225-.043-.529-.123-.829-.238-1.055a2.6 2.6 0 0 0-1.137-1.137c-.226-.115-.527-.195-1.055-.238-.538-.044-1.23-.045-2.225-.045h-5c-.995 0-1.687 0-2.225.045Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},429850:(e,r,s)=>{s.d(r,{GROUPS_LIST_STATUS_DECLINED:()=>t,GROUPS_LIST_STATUS_MARKED_AS_SPAM:()=>o,GROUPS_LIST_STATUS_UNSUBSCRIBED:()=>i,GROUPS_LIST_STATUS_INVITED:()=>n,GROUPS_LIST_STATUS_ACCEPTED:()=>c,GROUPS_LIST_STATUS_UNSURE:()=>a,GROUPS_LIST_STATUS_UNDECIDED:()=>l,GROUPS_LIST_STATUS_SUBSCRIBED:()=>u});var t=-1,o=-2,i=-3,n=0,c=1,a=3,l=4,u=5},63129:(e,r,s)=>{s.d(r,{GroupsList:()=>w});s(57327),s(702707),s(140561),s(324603),s(339714),s(115306),s(864765);var t=s(785893),o=s(897449),i=s(840060),n=s(733164),c=s(549357),a=s(927766),l=s(342269),u=s(152278),d=s(146143),h=s(608021),g=s(429850),p=s(315882),_=s(601546),f=s(873589),v=s(283536),L=s(315720),m=(s(667294),s(697762)),S=s(917258),b=s(362865),w={rand:function(){return Math.floor(1e4*Math.random())},toggleFave:function(e,r,s,t){var i=parseInt(e.getAttribute("data-value"))?1:0;ajax.post("fave.php",{act:i?"a_delete_group":"a_add_group",gid:r,hash:s},{onDone:s=>{(0,f.val)(e,s),e.setAttribute("data-value",1-i),this.updateGroupField(r,12,1-i)},showProgress:o.lockActionsMenuItem.pbind(e),hideProgress:o.unlockActionsMenuItem.pbind(e)}),(0,u.cancelEvent)(t)},toggleSubscription:function(e,r,s,t){var i=parseInt(e.getAttribute("data-value"))?1:0;ajax.post("al_wall.php",{act:"a_toggle_posts_subscription",subscribe:i?0:1,oid:-r,hash:s},{onDone:s=>{(0,f.val)(e,s),e.setAttribute("data-value",1-i),this.updateGroupField(r,13,1-i)},showProgress:o.lockActionsMenuItem.pbind(e),hideProgress:o.unlockActionsMenuItem.pbind(e)}),(0,u.cancelEvent)(t)},subscribe:function(e,r,s,t,i){void 0===i&&(i="");var n=(0,f.hasClass)(e,"flat_button");if(!(n&&(0,o.isButtonLocked)(e)||(0,o.actionsMenuItemLocked)(e))){var c=n?(0,f.hasClass)(e,"secondary"):!cur.scrollList.deleted[r];!function t(a){var l={act:c?"list_leave":"list_enter",gid:r,hash:s,confirm:a};i&&(l.trackcode=i),ajax.post("al_groups.php",l,{showProgress:(n?o.lockButton:o.lockActionsMenuItem).pbind(e),hideProgress:(n?o.unlockButton:o.unlockActionsMenuItem).pbind(e),onDone:function(s,o,i){if(o){var a=(0,d.showFastBox)((0,h.getLang)("global_warning"),o,(0,h.getLang)("group_leave_group"),(function(){a.hide(),t(1)}),(0,h.getLang)("global_cancel"));return!0}if((0,f.val)(e,s),cur.scrollList.deleted[r]=c,n)(0,f.toggleClass)(e,"secondary",!c);else{var l=(0,f.domClosest)("_gl_row",e);(0,f.toggleClass)(l,"deleted",c),i&&(0,f.addClass)(l,"closed")}},onFail:function(e){setTimeout((0,d.showFastBox)((0,h.getLang)("global_error"),e).hide,3e3)}})}()}},updateGroupField:function(e,r,s){cur.scrollList&&cur.scrollList.lists&&(0,l.each)(cur.scrollList.lists,(function(){if(this&&this.length)for(var t=0,o=this.length;t<o;++t)if(this[t][2]==e){this[t][r]=s;break}}))},enter:function(e,r,s,t,i){if(cur.invSwitching)return setTimeout((()=>this.enter(e,r,s,t,i)),100),!1;var n,c,a=cur.scrollList.tab;if("button"!=e.tagName.toLowerCase()){var l=(0,_.groupsInlineProgress)(e);n=l[0],c=l[1]}else n=o.lockButton.pbind(e),c=o.unlockButton.pbind(e);var u=this.rand(),p=this.rand();cur.scrollList[u]=p,cur.invSwitching=!0,ajax.post("/al_groups.php",{act:"enter",gid:r,hash:s,context:"2"+(t?"_"+t:"")},{onDone:(e,s)=>{if(cur.invSwitching=!1,cur.scrollList&&cur.scrollList[u]==p){var o=cur.scrollList.lists[a],n=i?g.GROUPS_LIST_STATUS_SUBSCRIBED:g.GROUPS_LIST_STATUS_ACCEPTED;if("unsure"==t?n=i?g.GROUPS_LIST_STATUS_SUBSCRIBED:g.GROUPS_LIST_STATUS_UNSURE:"decline"==t?n=i?g.GROUPS_LIST_STATUS_UNSUBSCRIBED:g.GROUPS_LIST_STATUS_DECLINED:"undecided"==t&&(n=g.GROUPS_LIST_STATUS_UNDECIDED),o&&"loading"!=o&&"update"!=o)for(var c=0,l=o.length;c<l;++c)o[c][2]==r&&(o[c][1]=n);else cur.scrollList.processed[a][r]=n;if(e&&cur.scrollList.lists.groups){var d=cur.scrollList.lists.groups;if("join"!=t&&"unsure"!=t&&t){if("undecided"==t)for(var h in d)d[h][2]==e[2]&&(d.splice(h,1),cur.scrollList.counts.groups--)}else d.unshift(e),cur.scrollList.counts.groups++;this.updateIndexer(d),this.showMore(!0)}TopNotifier&&!TopNotifier.shown()&&TopNotifier.invalidate();var _=(0,f.ge)("gl_inv"+r),v=_&&(0,f.geByClass1)("group_row_status",_);_&&(v.basehtml=v.innerHTML,v.innerHTML=s)}},onFail:function(e){if(e)return setTimeout((0,d.showFastBox)((0,h.getLang)("global_error"),e).hide,3e3),!0},showProgress:n,hideProgress:c})},leave:function(e,r,s,t){if(cur.invSwitching)return setTimeout((()=>this.leave(e,r,s,t)),100),!1;if(!e.firstChild||"progress_inline"!=e.firstChild.className){var i,n,c=this.rand(),a=this.rand(),l=cur.scrollList.tab;cur.scrollList[c]=a,"button"!=e.tagName.toLowerCase()?(e.backhtml||(e.backhtml=e.innerHTML),i=function(){var r=(0,f.getSize)(e)[0];e.innerHTML='<span class="progress_inline"></span>',(0,f.setStyle)((0,f.domFC)(e),{width:r})},n=function(){e.innerHTML=e.backhtml}):(i=o.lockButton.pbind(e),n=o.unlockButton.pbind(e)),cur.invSwitching=!0,ajax.post("/al_groups.php",{act:"leave",gid:r,hash:s,context:2},{onDone:function(e,s){if(cur.invSwitching=!1,cur.scrollList&&cur.scrollList[c]==a){var t=cur.scrollList.lists[l];if(t&&"loading"!=t&&"update"!=t)for(var o=0,i=t.length;o<i;++o)t[o][2]==r&&(t[o][1]=g.GROUPS_LIST_STATUS_DECLINED);else cur.scrollList.processed[l][r]=g.GROUPS_LIST_STATUS_DECLINED;TopNotifier&&!TopNotifier.shown()&&TopNotifier.invalidate();var n=(0,f.ge)("gl_inv"+r),u=n&&(0,f.geByClass1)("group_row_status",n);n&&(u.basehtml=u.innerHTML,u.innerHTML=s)}},showProgress:i,hideProgress:n})}},spam:function(e,r,s){if(!(0,f.domFC)(e)||"progress_inline"!=(0,f.domFC)(e)){var t=this.rand(),o=this.rand(),i=cur.scrollList.tab;cur.scrollList[t]=o,ajax.post("/al_groups.php",{act:"spam",gid:r,hash:s,context:1},{onDone:function(e){if(cur.scrollList&&cur.scrollList[t]==o){var s=cur.scrollList.lists[i];if(s&&"loading"!=s&&"update"!=s)for(var n=0,c=s.length;n<c;++n)s[n][2]==r&&(s[n][1]=g.GROUPS_LIST_STATUS_MARKED_AS_SPAM);else cur.scrollList.processed[i][r]=g.GROUPS_LIST_STATUS_MARKED_AS_SPAM;var a=(0,f.ge)("gl_inv"+r),l=a&&(0,f.geByClass1)("group_row_status",a);a&&(l.innerHTML=e)}},showProgress:function(){e.oldhtml=e.innerHTML;var r=(0,f.getSize)(e)[0];e.innerHTML='<span class="progress_inline"></span>',(0,f.setStyle)((0,f.domFC)(e),{width:r})},hideProgress:function(){e.innerHTML=e.oldhtml}})}},cancel:function(e,r,s){if(!(0,f.domFC)(e)||"progress_inline"!=(0,f.domFC)(e).className){var t=this.rand(),o=this.rand(),i=cur.scrollList.tab;cur.scrollList[t]=o,ajax.post("/al_groups.php",{act:"cancel",gid:r,hash:s,context:1},{onDone:()=>{if(cur.scrollList&&cur.scrollList[t]==o){var e=cur.scrollList.lists[i];if(e&&"loading"!=e&&"update"!=e){for(var s in e)e[s][2]==r&&(e.splice(s,1),cur.scrollList.counts.groups--);this.updateIndexer(e),this.showMore(!0)}else cur.scrollList.processed[i][r]=g.GROUPS_LIST_STATUS_INVITED;var n=(0,f.ge)("gl_inv"+r),c=n&&(0,f.geByClass1)("group_row_status",n);n&&c&&c.basehtml&&(c.innerHTML=c.basehtml)}},showProgress:function(){e.oldhtml=e.innerHTML;var r=(0,f.getSize)(e)[0];e.innerHTML='<span class="progress_inline"></span>',(0,f.setStyle)((0,f.domFC)(e),{width:r})},hideProgress:function(){e.innerHTML=e.oldhtml}})}},updateIndexer:function(e){cur.scrollList.cache.groups={all:[]};var r=cur.scrollList.cache.groups;for(var s in e)e.hasOwnProperty(s)&&r.all.push(s);cur.scrollList.index.groups=new L.vkIndexer(r.all,(function(r){return e[r][0]}))},rejectAll:function(e,r){(0,d.showFastBox)((0,h.getLang)("global_warning"),(0,h.getLang)("groups_sure_reject_all"),(0,h.getLang)("groups_reject_all_inv"),(function(e){ajax.post("/al_groups.php",{act:"reject_all",hash:r},{showProgress:()=>(0,o.lockButton)(e),hideProgress:()=>(0,o.unlockButton)(e)})}),(0,h.getLang)("global_cancel"))},scrollCheck:function(){if(!i.browser.mobile&&cur.scrollList){var e=(0,f.ge)("ui_"+cur.scrollList.tab+"_load_more"),r=(0,f.ge)("ui_search_load_more");if((0,f.isVisible)(e)||(e=r,(0,f.isVisible)(e))){var s=document.documentElement,t=window.innerHeight||s.clientHeight||document.body.clientHeight,o=(0,a.scrollGetY)();(o+t>e.offsetTop||cur.searchOffset&&o+2*t>e.offsetTop)&&this.showMore()}}},initScroll:function(){this.destroyScroll(),this._scrollCheck=()=>this.scrollCheck(),(0,u.addEvent)(window,"scroll",this._scrollCheck),(0,u.addEvent)(window,"resize",this._scrollCheck)},destroyScroll:function(){(0,u.removeEvent)(window,"scroll",this._scrollCheck),(0,u.removeEvent)(window,"resize",this._scrollCheck)},locNav:function(e,r,s){var t=e.tab,o=t||("events"==s.act?"future":"groups");if(delete e.tab,(0,n.isEmpty)(e)&&void 0!==t)return(0,f.hide)("groups_list_tab_"+cur.scrollList.tab),this.updateSummary(cur.scrollList.counts[cur.scrollList.tab]),cur.scrollList.tab=o,cur.scrollList.summary=(0,f.geByClass1)("ui_tab_count",(0,f.ge)("groups_"+o+"_tab")),(0,f.show)("groups_list_tab_"+o),(0,c.checkPageBlocks)(),nav.setLoc(s),window.uiSearch&&uiSearch.reset(cur.scrollList.query,!0),(0,f.elfocus)(cur.scrollList.query),this.updateSummary(cur.scrollList.counts[o]),cur.scrollList.offset=(0,f.ge)("groups_list_"+o).childNodes.length,this.showMore(!0),window.uiTabs&&uiTabs.hideProgress((0,f.ge)("groups_"+o+"_tab")),!1},init:function(e){(0,l.extend)(cur,{module:"groups_list",_back:{text:(0,h.getLang)("groups_back_to_list"),show:[()=>this.initScroll,f.elfocus.pbind("groups_list_search")],hide:[()=>this.destroyScroll]},scrollList:{tab:e.tab,url:"al_groups.php",params:{act:"get_list",mid:e.mid},prefix:"groups_list_",query:(0,f.ge)("groups_list_search"),queryCont:(0,f.gpeByClass)("_wrap",(0,f.ge)("groups_list_search")),queryWrap:(0,f.ge)("group_u_search_input_wrap"),summary:(0,f.geByClass1)("ui_tab_count",(0,f.ge)("groups_"+(e.tab||"groups")+"_tab")),searchSummary:(0,f.ge)("groups_search_summary"),invites:(0,f.ge)("groups_invites_wrap"),invitesPreload:(0,f.ge)("groups_invites_preload"),invitesMoreLnk:(0,f.ge)("ui_invites_load_more"),searchWrap:(0,f.ge)("groups_list_search_wrap"),searchCont:(0,f.ge)("groups_list_search_cont"),eventsPopular:(0,f.ge)("events_popular_list"),perpage:20,offset:(0,f.ge)("groups_list_"+e.tab).childNodes.length,lists:{},cache:{},index:{},deleted:{},processed:{groups:{},admin:{},inv:{},future:{},past:{},events_concerts:{}},filtered:{},queries:{},counts:e.counts,genEmpty:e.genEmpty,genRow:e.genRow,genSummary:e.genSummary,genGroupsSummary:e.genGroupsSummary,invShown:e.invShown},filter:e.filter}),setTimeout(f.elfocus.pbind(cur.scrollList.query),0),cur.nav.push((()=>this.locNav)),setTimeout((()=>this.load),0),vk.version?(0,u.addEvent)(window,"load",(()=>this.initScroll)):this.initScroll(),cur.destroy.push((e=>{e==cur&&this.destroyScroll()})),"search"===nav.objLoc.from&&(cur.searchSeoMode=!0)},updateSummary:function(e,r){(0,f.val)(r?cur.scrollList.searchSummary:cur.scrollList.summary,e?(0,h.langNumeric)(e,"%s",!0):"")},load:function(e,r){var s=r||cur.scrollList.tab;if(!cur.scrollList.lists[s]){var t=this.rand(),o=this.rand();cur.scrollList[t]=o,cur.scrollList.lists[s]="loading",ajax.post(cur.scrollList.url,(0,l.extend)(cur.scrollList.params,{tab:s}),{onDone:r=>{if(cur.scrollList&&cur.scrollList[t]==o){var i="update"==cur.scrollList.lists[s];if(i||"loading"==cur.scrollList.lists[s]){cur.scrollList.cache[s]={all:[]};for(var n=cur.scrollList.processed[s],c=0,a=r.length;c<a;++c){var l=n[r[c][2]];l&&(r[c][1]=l),cur.scrollList.cache[s].all.push(c)}cur.scrollList.indexing||(cur.scrollList.indexing={}),cur.scrollList.indexing[s]=!0,cur.scrollList.lists[s]=r;var u=i?()=>{var r,i,n,c,a;cur.scrollList&&cur.scrollList[t]==o&&cur.scrollList.tab==s&&this.showMore(e),(null==(r=cur)||null==(i=r.scrollList)?void 0:i.cache[s])&&!(null==(n=cur)||null==(c=n.scrollList)||null==(a=c.cache[s].all)?void 0:a.length)&&delete cur.scrollList.indexing[s]}:function(){};cur.scrollList.index[s]=new L.vkIndexer(cur.scrollList.cache[s].all,(e=>(delete cur.scrollList.indexing[s],cur.scrollList.lists[s][e][0])),u)}}},local:1})}},getHighlight:function(e){var r=cur.scrollList.index[cur.scrollList.tab],s=r.delimiter,t=r.trimmer;return e+=" "+((0,h.parseLatin)(e)||""),e=(e=(0,l.escapeRE)(e).replace(/&/g,"&amp;")).replace(t,"").replace(s,"|").replace(/(^\||\|$)/g,""),{re:new RegExp("("+e+")","gi"),val:'<span class="highlight">$1</span>'}},onSearchChange:function(){delete cur.exactSearch,this.showMore(!1)},onSearchEnter:function(){cur.exactSearch=1,this.showMore(!0)},genEmpty:function(e){var r=e=>'<div class="no_rows">'+e+"</div>";if(e){var s="future"===cur.scrollList.tab||"past"===cur.scrollList.tab,t='<a href="/groups?act=catalog&c[q]='+encodeURIComponent(e)+(s?"&c[type]=3":"")+"\" onclick=\"return uiRightMenu.go(geByClass1('groups_section_search', 'narrow_column'), event, this.href);\">",o=s?(0,h.getLang)("events_not_found"):(0,h.getLang)("groups_not_found_such");return r(o+="<br>"+(0,h.getLang)("groups_you_can_find").replace("{link}",t).replace("{/link}","</a>").replace("{term}",t+(0,n.clean)(e)+"</a>"))}if("groups"===cur.scrollList.tab){var i=(0,h.getLang)("groups_number0_1");return r(i+="<br>"+(0,h.getLang)("groups_no_groups_search_tip").replace("{link_add}",'<a href="/groups_create" onclick="return showWiki({w: \'groups_create\'});">').replace("{/link_add}","</a>").replace("{link_search}","<a href=\"/groups?act=catalog\" onclick=\"return uiRightMenu.go(geByClass1('groups_section_search', 'narrow_column'), event, this.href);\">").replace("{/link_search}","</a>"))}return"admin"===cur.scrollList.tab?r((0,h.getLang)("groups_number0_1")):"past"===cur.scrollList.tab?r((0,h.getLang)("events_no_past_events")):"future"===cur.scrollList.tab?r((0,h.getLang)("events_no_future_events")):r((0,h.getLang)("groups_invitations_number0_1"))},genRow:function(e,r){var s=cur.scrollList.tab,o=e[1],i=e[2],c=e[3],a=e[4],l=e[5],u=e[6],d=e[7],g=e[8],p=e[11],_=e[12],v=e[13],L=e[14],b=e[15],w=e[16],T=e[17],k=u>=10,y=!cur.scrollList.deleted[i];l=3===u||-2===u?(0,h.getLang)("groups_N_people_like_it",l,!0):(0,h.getLang)("groups_num_particip",l,!0);var x=e[9]?'<a onclick="GroupsList.feedbanGroup(this, '+i+", '"+d+"');\">"+(0,h.getLang)("groups_feedunblock")+"</a>":"",C=(0,n.intval)(e[10]),P="",j="/verify";1&C&&(P+="page_verified "),2&C&&(P+="page_top_author ",j=cur.prometheusBlogLink);var A=C?(0,f.rs)(cur.verifiedTpl,{owner_val:-i,verify_type:C,verify_link:j,verify_class:P}):"",M="",E=b?(0,f.rs)(cur.vkPayTpl):"",I=b?" inline":"";4&C&&(g=cur.governmentBadge),M+=(0,f.rs)(cur.infoTpl,{label:g||"",class:I}),M+=E,M+=(0,f.rs)(cur.infoTpl,{label:l}),x&&(M+=(0,f.rs)(cur.infoTpl,{label:x}));var B=cur.actionsTpl?(0,f.rs)(cur.actionsTpl,{gid:i,subscribe_label:y?(0,h.getLang)("public_unsubscribe"):(0,h.getLang)("public_subscribe"),subscribe_hash:d,fave_label:_?(0,h.getLang)("groups_bookmark_delete"):(0,h.getLang)("groups_bookmark_add"),fave_val:_?1:0,notify_hash:d,notify_label:v?(0,h.getLang)("wall_unsubscribe_from_posts"):(0,h.getLang)("wall_subscribe_to_posts"),notify_val:v?1:0,menu_label:p?(0,h.getLang)("groups_fast_menu_access_invert"):(0,h.getLang)("groups_fast_menu_access"),menu_val:p?1:0,track_code:T||""}):"",O="";return L&&Object.keys(L).length&&(O=Object.keys(L).reduce(((e,r)=>e+=" data-"+r+'="'+L[r]+'"'),"")),(0,f.rs)(cur.rowTpl,{gid:i,tab:s,href:c,avatar:m.renderToString((0,t.jsx)(S.AvatarRich,{size:80,isNFT:w,src:a,href:c,badge:k&&(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:cur.eventBadge}})})),actions:B,name:r,official:A,info:M,class:(y?"":" deleted")+(o?" adminned":""),dataset:O})},showMore:function(e){var r=(0,p.generateQID)(),s=cur.scrollList.tab,t=cur.scrollList.lists[s];if(!t||"loading"==t||"update"==t)return t||this.load(e,cur.scrollList.tab),void(cur.scrollList.lists[s]="update");if(!cur.scrollList.indexing||!cur.scrollList.indexing[s]){s=cur.scrollList.tab,t=cur.scrollList.cache[s].all;var o=(0,l.trim)(cur.scrollList.query.value),i=cur.searchStr!==o;cur.searchStr=o,0===o.length&&(0,p.removeSearchPositionTracker)("groups"),void 0===cur.scrollList.queries[s]&&(cur.scrollList.queries[s]="");var n=e||o!=cur.scrollList.queries[s];if(n||!1!==e){cur.scrollList.queries[s]=o;var u=!1;if(o){if(void 0===(t=cur.scrollList.cache[s]["_"+o])){var d=cur.scrollList.index[s].search(o),h={};t=[];for(var g=0,_=d.length;g<_;++g)h[d[g]]||(h[d[g]]=!0,t.push(d[g]));t.sort((function(e,r){return e-r})),cur.scrollList.cache[s]["_"+o]=t}u=this.getHighlight(o)}var v=t.length,L=(0,f.ge)(cur.scrollList.prefix+s),m=(0,f.ge)("ui_"+s+"_load_more");if(this.updateSummary(v),o&&n&&i&&(0,p.saveSearchAttemptStats)(p.serviceGroups,0,v,o,r,0,"0","no_model",p.blockNameOwn),!v)return L.innerHTML=this.genEmpty(o),void(o&&this.needSearch(s)?n?(this.serverSearch(L,o,[],r),(0,f.hide)(m)):cur.searchOffset&&this.serverSearchMore(L,o,r):((0,f.hide)(m),(0,f.hide)(cur.scrollList.searchWrap),(0,f.show)(cur.scrollList.eventsPopular),cur.searchOffset=0));for(var S=n?0:cur.scrollList.offset,b=Math.min(v,S+cur.scrollList.perpage),w=[],T=S;T<b;++T){var k=cur.scrollList.lists[s][t[T]];if(k){var y=k[0];u&&(y=y.replace(u.re,u.val)),w.push(this.genRow(k,y))}}if(o||S&&!n||((0,f.hide)(cur.scrollList.searchWrap),(0,f.show)(cur.scrollList.eventsPopular),cur.searchOffset=0),n)if((0,f.hasClass)(cur.scrollList.queryCont,"ui_search_fixed")&&(0,a.scrollToY)((0,f.getXY)(cur.scrollList.queryWrap)[1]+1,0),L.innerHTML=w.join(""),(0,c.checkPageBlocks)(),cur.searchOffset=!1,t.length<5&&o&&this.needSearch(s)){var x,C=[];for(var P in t)t.hasOwnProperty(P)&&(x=cur.scrollList.lists[s][t[P]],C.push(x[2]));this.serverSearch(L,o,C,r)}else(0,f.hide)(cur.scrollList.searchWrap),(0,f.show)(cur.scrollList.eventsPopular),cur.searchOffset=0;else L.innerHTML+=w.join(""),cur.searchOffset&&this.serverSearchMore(L,o,r);cur.scrollList.offset=b,cur.searchOffset||(b<v?f.show:f.hide)(m)}}},showMoreInvites:function(e){if(!cur.loadingInvites){for(var r=cur.scrollList.invites&&(0,f.geByClass1)("groups_list",cur.scrollList.invites),s=cur.scrollList.invitesPreload,t=cur.scrollList.invitesMoreLnk;(0,f.domFC)(s);)r.appendChild((0,f.domFC)(s)),cur.scrollList.invShown++;(0,f.toggle)(t,cur.scrollList.counts.invite>cur.scrollList.invShown),(0,f.isVisible)(t)&&ajax.post("/al_groups.php",{act:"more_invites",offset:cur.scrollList.invShown},{onDone:function(e,r){s.innerHTML=e,r&&(cur.scrollList.counts.invite-=r)},showProgress:function(){cur.loadingInvites=!0},hideProgress:function(){cur.loadingInvites=!1}})}},serverSearchMore:function(e,r,s){if(!cur.searchLoadingMore){cur.searchLoadingMore=1;var t=(0,f.ge)("ui_search_load_more");ajax.post("/al_groups.php",{act:"server_search",q:r,query_id:s,offset:cur.searchOffset,exact:cur.exactSearch,exclude:cur.searchExclude.join(",")},{onDone:function(e,r,s,t){cur.searchLoadingMore=0,e?(cur.searchOffset=s,cur.scrollList.searchCont.appendChild((0,f.cf)(r))):cur.searchOffset=0,(!r||s>=e?f.hide:f.show)("ui_search_load_more")},onFail:function(){cur.searchLoadingMore=0},showProgress:o.lockButton.pbind(t),hideProgress:o.unlockButton.pbind(t)})}},extendedSearch:function(e){clearTimeout(cur.searchTimeout),cur.searchTimeout=setTimeout((function(){var r=(0,f.geByClass1)("groups_section_search");window.searcher&&r?(0,f.hasClass)(r,"ui_rmenu_item_sel")?window.searcher.onEnter():(uiRightMenu.switchMenu(r),uiRightMenu.showProgress(r),nav.go(r.href+"&c[like_hints]=1&c[q]="+e)):nav.go("/groups?act=catalog&c[q]="+e)}),500)},onExtendedSearchChange:function(e,r){(0,f.val)("c[like_hints]",1),this.extendedSearch(e)},onExtendedSearchEnter:function(e,r,s){(0,f.val)("c[like_hints]",""),this.extendedSearch(r)},needSearch:function(e){return"groups"==e||"future"==e||"past"==e},serverSearch:function(e,r,s,t){if(!this.needSearch(cur.scrollList.tab))return!1;clearTimeout(cur.searchTimeout),cur.searchTimeout=setTimeout((()=>{if(cur.searchStr==r){cur.searchExclude=s||[];var e=+new Date;ajax.post("/al_groups.php",{act:"server_search",q:r,query_id:t,exact:cur.exactSearch,exclude:cur.searchExclude.join(",")},{onDone:(s,o,i,n,a)=>{cur.searchStr==r&&(r&&((0,p.saveSearchAttemptStats)(p.serviceGroups,e,s,r,t,n,a.query_duration,a.model_name,p.blockNameSearch),(0,v.updateCounters)(location.href,document.referrer)),s?(cur.scrollList.searchCont.innerHTML=o,(0,f.show)(cur.scrollList.searchWrap),(0,f.hide)(cur.scrollList.eventsPopular),(i<s||!o)&&(0,f.show)("ui_search_load_more")):(cur.scrollList.searchCont.innerHTML="",(0,f.hide)(cur.scrollList.searchWrap),(0,f.show)(cur.scrollList.eventsPopular)),(0,c.checkPageBlocks)(),this.updateSummary(s,!0),cur.searchOffset=i)},showProgress:uiSearch.showProgress.pbind(cur.scrollList.query),hideProgress:uiSearch.hideProgress.pbind(cur.scrollList.query)})}}),300)},showMapBox:function(e,r,s){window.showZeroZoneBox&&window.showZeroZoneBox("places",(()=>{this.showMapBox(e,r,s)}))||(0,d.showTabbedBox)("/al_places.php",{act:"show_photo_place",place_id:e},{stat:["places.css","map.css","maps.js","ui_controls.css","ui_controls.js"]})},feedbanGroup:function(e,r,s){var t=-r;ajax.post("/al_fans.php",{act:"feedtgl",oid:t,hash:s},{onDone:(s,t)=>{e.innerHTML=t,this.updateGroupField(r,9,s)},showProgress:function(){e.innerHTML='<span class="progress_inline"></span>'}})},initPositionStat(){document.getElementById("groups_list_groups").addEventListener("click",(function(e){var r=e.target;if("A"===r.tagName&&(r.classList.contains("group_row_title")||r.classList.contains("group_row_img"))){var s=r.closest(".group_list_row").dataset,t=s.groupId,o=s.pos,i=s.trackPosHash;w.addClickStat(t,o,i)}}))},addClickStat(e,r,s){s&&e&&r&&!cur.searchStr&&(0,p.statlogsValueEvent)("groups_hints_item_click",s,e,r)},initRightBlocks:e=>{(0,b.initGroupsListRightBlocks)(e)}}},601546:(e,r,s)=>{s.d(r,{groupsEnter:()=>o,groupsInlineProgress:()=>i,goToRecommendedGroups:()=>n});s(241539),s(788674);var t=s(873589);function o(e,r,s,t){void 0===s&&(s=""),void 0===t&&(t="");var o={act:"enter",gid:e,hash:r,context:s,trackcode:t};return new Promise(((e,r)=>{window.ajax.post("al_groups.php",o,{onDone(r){e(r)},onFail(){r()}})}))}function i(e){e.backhtml||(e.backhtml=e.innerHTML);return[()=>{var r=(0,t.getSize)(e).w;e.innerHTML='<span class="progress_inline"></span>',(0,t.setStyle)((0,t.domFC)(e),{width:r})},()=>{e.innerHTML=e.backhtml}]}function n(){var e=document.querySelector("#narrow_column .groups_section_recommendations");e&&e.click()}},61836:(e,r,s)=>{s.d(r,{default:()=>t});const t={content:"PageBlock-module__content--LU3jx"}},105974:(e,r,s)=>{s.d(r,{useStateAndRef:()=>i});var t=s(570655),o=s(667294),i=function(e){var r=(0,t.__read)((0,o.useState)(e),2),s=r[0],i=r[1],n=(0,o.useRef)(e);return[s,n,function(e){n.current=e,i(e)}]}},812317:(e,r,s)=>{s.d(r,{initReactApp:()=>o});var t=s(973935);function o(e,r){var s;e&&(t.render(r,e),null===(s=window.cur.destroy)||void 0===s||s.push((function(){e&&t.unmountComponentAtNode(e)})))}},327730:(e,r,s)=>{s.d(r,{PageBlock:()=>c});var t=s(570655),o=s(785893),i=s(86894),n=s(61836),c=function(e){var r=e.children,s=(0,t.__rest)(e,["children"]);return(0,o.jsx)(i.Group,(0,t.__assign)({},s,{padding:"m",mode:"card"},{children:(0,o.jsx)("div",(0,t.__assign)({className:n.default.content},{children:r}),void 0)}),void 0)}},464284:(e,r,s)=>{s.d(r,{PageBlockHeader:()=>n});var t=s(570655),o=s(785893),i=s(86894),n=function(e){var r=e.href,s=e.onClick,n=e.children;return(0,o.jsx)(o.Fragment,{children:r||s?(0,o.jsx)(i.Tappable,(0,t.__assign)({href:r,onClick:s,hasActive:!0,hasHover:!1},{children:(0,o.jsx)(i.Header,{children:n},void 0)}),void 0):(0,o.jsx)(i.Header,{children:n},void 0)},void 0)}},22452:(e,r,s)=>{s.d(r,{GroupsRecommendationsBlock:()=>_});var t=s(570655),o=s(785893),i=s(86894),n=s(304319),c=s(978281),a=s(619141),l=s(327730),u=s(464284),d=s(588169),h=s(601546),g=s(831333),p=s(917258),_=function(e){var r=e.href,s=e.limit,_=e.title,f=e.items,v=e.button,L=e.tooltip,m=(0,d.useRecommendations)(s,f),S=m.items,b=m.loaders,w=m.updateLoaderById,T=function(e){e.preventDefault(),e.stopPropagation(),(0,h.goToRecommendedGroups)()};return S.length?(0,o.jsxs)(l.PageBlock,(0,t.__assign)({header:(0,o.jsx)(u.PageBlockHeader,(0,t.__assign)({href:r,onClick:T},{children:_}),void 0),separator:"hide"},{children:[(0,o.jsx)(i.Spacing,{size:4},void 0),(0,o.jsx)(g.SpacedList,(0,t.__assign)({spacing:2},{children:S.map((function(e){var r=b[e.id]===d.LoaderStatus.LOADING;return(0,o.jsx)(i.SimpleCell,(0,t.__assign)({href:e.href,before:(0,o.jsx)(p.AvatarRich,{size:48,src:e.photo,isNFT:e.is_nft,imgAlt:e.title},void 0),badgeAfterTitle:e.is_verified&&(0,o.jsx)(n.default,{},void 0),subtitle:e.subtitle,after:(0,o.jsx)(o.Fragment,{children:r?(0,o.jsx)(i.Spinner,{},void 0):(0,o.jsx)(a.TextTooltip,(0,t.__assign)({text:L,placement:"top"},{children:(0,o.jsx)(i.IconButton,(0,t.__assign)({"aria-label":L,onClick:function(r){return function(e,r,s,t){e.preventDefault(),e.stopPropagation(),w(r,d.LoaderStatus.LOADING),(0,h.groupsEnter)(r,s,"",t).then((function(){w(r,d.LoaderStatus.LOADED)})).catch((function(){w(r,d.LoaderStatus.FAILED)}))}(r,e.id,e.hash,e.track_code)}},{children:(0,o.jsx)(c.default,{},void 0)}),void 0)}),void 0)},void 0)},{children:e.title}),e.id)}))}),void 0),(0,o.jsx)(i.Div,{children:(0,o.jsx)(i.Button,(0,t.__assign)({mode:"secondary",size:"s",stretched:!0,href:r,onClick:T},{children:v}),void 0)},void 0)]}),void 0):null}},588169:(e,r,s)=>{s.d(r,{LoaderStatus:()=>t,useRecommendations:()=>a});var t,o=s(570655),i=s(667294),n=s(808997),c=s(105974);!function(e){e.LOADING="loading",e.LOADED="loaded",e.FAILED="failed"}(t||(t={}));var a=function(e,r){for(var s=(0,i.useRef)(r),a=(0,o.__read)((0,c.useStateAndRef)({}),3),l=a[0],u=a[1],d=a[2],h=(0,n.useIsMounted)(),g=[],p=function(e){return g.find((function(r){return r.id===e.id}))},_=function(){return s.current.filter((function(e){if(u.current[e.id]!==t.LOADED&&!p(e))return!0}))},f=_(),v=0;v<s.current.length;v++)if(u.current[s.current[v].id]===t.LOADED){var L=f[e-1];L&&(g.push(L),f=_())}else{var m=s.current[v];p(m)||g.push(m)}return s.current=g,{items:g.slice(0,e),loaders:l,updateLoaderById:function(e,r){var s;h()&&d((0,o.__assign)((0,o.__assign)({},u.current),((s={})[e]=r,s)))}}}},226254:(e,r,s)=>{var t=s(63129);window.GroupsList=t.GroupsList;try{window.stManager.done(window.jsc("web/groups_list.js"))}catch(e){}},710903:(e,r,s)=>{s.d(r,{UpcomingEventsBlock:()=>d});var t=s(570655),o=s(785893),i=s(86894),n=s(304319),c=s(327730),a=s(464284),l=s(831333),u=s(917258),d=function(e){var r=e.href,s=e.title,d=e.items,h=e.button;return d.length?(0,o.jsxs)(c.PageBlock,(0,t.__assign)({header:(0,o.jsx)(a.PageBlockHeader,(0,t.__assign)({href:r},{children:s}),void 0)},{children:[(0,o.jsx)(i.Spacing,{size:4},void 0),(0,o.jsx)(l.SpacedList,(0,t.__assign)({spacing:2},{children:d.map((function(e){return(0,o.jsx)(i.SimpleCell,(0,t.__assign)({href:e.href,before:(0,o.jsx)(u.AvatarRich,{size:48,src:e.photo,isNFT:e.is_nft,imgAlt:e.title},void 0),badgeAfterTitle:e.is_verified&&(0,o.jsx)(n.default,{},void 0),subtitle:e.subtitle},{children:e.title}),e.id)}))}),void 0),(0,o.jsx)(i.Div,{children:(0,o.jsx)(i.Button,(0,t.__assign)({mode:"secondary",size:"s",stretched:!0,href:r},{children:h}),void 0)},void 0)]}),void 0):null}},362865:(e,r,s)=>{s.d(r,{initGroupsListRightBlocks:()=>d});var t=s(570655),o=s(785893),i=s(86894),n=s(659397),c=s(99656),a=s(710903),l=s(22452),u=s(812317),d=function(e){e=(0,n.decodeHTMLEntitiesDeep)(e);var r=document.querySelector("#groups_list_right_blocks_root");(0,u.initReactApp)(r,(0,o.jsxs)(c.AppRootProvider,{children:[(0,o.jsx)(i.Spacing,{size:15},void 0),e.upcomingEvents&&(0,o.jsx)(a.UpcomingEventsBlock,(0,t.__assign)({},e.upcomingEvents),void 0),e.groupsRecommendations&&(0,o.jsx)(l.GroupsRecommendationsBlock,(0,t.__assign)({},e.groupsRecommendations),void 0)]},void 0))}}},c={};function a(e){var r=c[e];if(void 0!==r)return r.exports;var s=c[e]={exports:{}};return n[e].call(s.exports,s,s.exports,a),s.exports}a.m=n,e=[],a.O=(r,s,t,o)=>{if(!s){var i=1/0;for(u=0;u<e.length;u++){for(var[s,t,o]=e[u],n=!0,c=0;c<s.length;c++)(!1&o||i>=o)&&Object.keys(a.O).every((e=>a.O[e](s[c])))?s.splice(c--,1):(n=!1,o<i&&(i=o));if(n){e.splice(u--,1);var l=t();void 0!==l&&(r=l)}}return r}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[s,t,o]},a.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return a.d(r,{a:r}),r},s=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var o=Object.create(null);a.r(o);var i={};r=r||[null,s({}),s([]),s(s)];for(var n=2&t&&e;"object"==typeof n&&!~r.indexOf(n);n=s(n))Object.getOwnPropertyNames(n).forEach((r=>i[r]=()=>e[r]));return i.default=()=>e,a.d(o,i),o},a.d=(e,r)=>{for(var s in r)a.o(r,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:r[s]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((r,s)=>(a.f[s](e,r),r)),[])),a.u=e=>9375===e?"voice_message_player.f7f6ec3014f8bf787c7e.js":28762===e?"speech.ec5bb88b79217da0bc5d.js":57468===e?"SilentModeForms.33608795033584268535.js":75980===e?"menu_settings.0f17151bd588fe6a5267.js":void 0,a.miniCssF=e=>e+"."+{57468:"d9fcc825987a206f0097",75980:"3a98749ca45868f84306"}[e]+".css",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),t={},a.l=(e,r,s,o)=>{if(t[e])t[e].push(r);else{var i,n;if(void 0!==s)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var u=c[l];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")=="vk:"+s){i=u;break}}i||(n=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack","vk:"+s),i.src=e),t[e]=[r];var d=(r,s)=>{i.onerror=i.onload=null,clearTimeout(h);var o=t[e];if(delete t[e],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((e=>e(s))),r)return r(s)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=d.bind(null,i.onerror),i.onload=d.bind(null,i.onload),n&&document.head.appendChild(i)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="/dist/",o=e=>new Promise(((r,s)=>{var t=a.miniCssF(e),o=a.p+t;if(((e,r)=>{for(var s=document.getElementsByTagName("link"),t=0;t<s.length;t++){var o=(n=s[t]).getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(o===e||o===r))return n}var i=document.getElementsByTagName("style");for(t=0;t<i.length;t++){var n;if((o=(n=i[t]).getAttribute("data-href"))===e||o===r)return n}})(t,o))return r();((e,r,s,t)=>{var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.onerror=o.onload=i=>{if(o.onerror=o.onload=null,"load"===i.type)s();else{var n=i&&("load"===i.type?"missing":i.type),c=i&&i.target&&i.target.href||r,a=new Error("Loading CSS chunk "+e+" failed.\n("+c+")");a.code="CSS_CHUNK_LOAD_FAILED",a.type=n,a.request=c,o.parentNode.removeChild(o),t(a)}},o.href=r,document.head.appendChild(o)})(e,o,r,s)})),i={4867:0},a.f.miniCss=(e,r)=>{i[e]?r.push(i[e]):0!==i[e]&&{57468:1,75980:1}[e]&&r.push(i[e]=o(e).then((()=>{i[e]=0}),(r=>{throw delete i[e],r})))},(()=>{var e={4867:0};a.f.j=(r,s)=>{var t=a.o(e,r)?e[r]:void 0;if(0!==t)if(t)s.push(t[2]);else if(75980!=r){var o=new Promise(((s,o)=>t=e[r]=[s,o]));s.push(t[2]=o);var i=a.p+a.u(r),n=new Error;a.l(i,(s=>{if(a.o(e,r)&&(0!==(t=e[r])&&(e[r]=void 0),t)){var o=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.src;n.message="Loading chunk "+r+" failed.\n("+o+": "+i+")",n.name="ChunkLoadError",n.type=o,n.request=i,t[1](n)}}),"chunk-"+r,r)}else e[r]=0},a.O.j=r=>0===e[r];var r=(r,s)=>{var t,o,[i,n,c]=s,l=0;for(t in n)a.o(n,t)&&(a.m[t]=n[t]);if(c)var u=c(a);for(r&&r(s);l<i.length;l++)o=i[l],a.o(e,o)&&e[o]&&e[o][0](),e[i[l]]=0;return a.O(u)},s=self.webpackChunkvk=self.webpackChunkvk||[];s.forEach(r.bind(null,0)),s.push=r.bind(null,s.push.bind(s))})();var l=a.O(void 0,[76429,75514,24509,56990,98066,76400,40885,68592],(()=>a(226254)));l=a.O(l)})();