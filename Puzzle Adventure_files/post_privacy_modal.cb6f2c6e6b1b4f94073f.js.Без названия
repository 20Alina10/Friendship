(()=>{"use strict";var e,t,n,s,o,r,i={383925:(e,t,n)=>{n.d(t,{default:()=>s});const s=(0,n(28178).makeIcon)("Icon28ChevronRightOutline","chevron_right_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="chevron_right_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path stroke="#8BC1FF" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m11 7.5 6.5 6.5-6.5 6.5" /><path fill="currentColor" fill-rule="nonzero" d="m16.086 14-5.793 5.793a1 1 0 0 0 1.414 1.414l6.5-6.5a1 1 0 0 0 0-1.414l-6.5-6.5a1 1 0 0 0-1.414 1.414L16.086 14Z" /></g></symbol>',28,28,!1,void 0)},527551:(e,t,n)=>{function s(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g id="user_outline_20__Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="user_outline_20__Icons-20/user_outline_20"><g id="user_outline_20__user_outline_20"><path opacity=".1" d="M0 0h20v20H0z"/><path d="M12.5 5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0ZM14 5a4 4 0 1 1-8 0 4 4 0 0 1 8 0ZM4 15.5c0 .72.36 1 1 1h10c.64 0 1-.28 1-1 0-2.33-2.57-3.5-6-3.5s-6 1.17-6 3.5Zm-1.5 0c0-3.48 3.33-5 7.5-5s7.5 1.52 7.5 5c0 1.63-1.1 2.5-2.5 2.5H5c-1.4 0-2.5-.87-2.5-2.5Z" id="user_outline_20__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></g></svg>',name:"user_outline_20"}}n.d(t,{getIcon20UserOutline:()=>s})},835165:(e,t,n)=>{n.d(t,{GROUPS_ADMIN_LEVEL_USER:()=>s,GROUPS_ADMIN_LEVEL_ADMINISTRATOR:()=>o,USER_META_FIELD_IS_DONUT_PAID_MEMBER:()=>r,GROUPS_CLASS_EVENT:()=>i});var s=0,o=3,r="is_donut_paid_member",i=2},719711:(e,t,n)=>{n.d(t,{addDelegateEvent:()=>a,removeDelegateEvent:()=>l});n(57327),n(66992),n(821249),n(651532),n(241539),n(323123),n(454747),n(333948);var s=n(873589),o=n(152278),r=new window.Map;function i(e){var t=r.get(e.currentTarget);if(t){var n=t[e.type];if(n)for(var o,i=0;i<n.length;i++){var a=n[i],l=a[0],d=a[1],c=void 0;if((0,s.hasClass)(e.target,l)?c=d(e,e.target):(o=(0,s.gpeByClass)(l,e.target,e.currentTarget))&&(c=d(e,o)),!1===c)break}}}function a(e,t,n,s,a){var l=r.get(e);l||(r.set(e,{}),l=r.get(e));for(var d=t.split(" "),c=0;c<d.length;c++){var _=d[c];l[_]||(l[_]=[],a?(0,o.addEvent)(e,_,i,!1,!1,a):(0,o.addEvent)(e,_,i)),l[_].push([n,s])}}function l(e,t,n,s){var a=r.get(e);a&&(t.split(" ").forEach((t=>{a[t]&&(a[t]=a[t].filter((e=>e[0]!==n||e[1]!==s)),0===a[t].length&&(0,o.removeEvent)(e,t,i))})),0===Object.keys(a).map((e=>a[e].length)).reduce(((e,t)=>e+t))&&r.delete(e))}},934103:(e,t,n)=>{n.d(t,{getNativeOption:()=>r,createScroll:()=>d});var s=n(610124),o=n(927766);function r(e,t){return document.body[e]||document.documentElement[e]}class i{constructor(e,t){this.el=e,this.opts=t,this.module=(0,s.createModule)({handlers:(e,t)=>{e(window,"scroll",this.onScroll.bind(this)),e(window,"resize",this.resize.bind(this))}}),this.innerHeight=window.innerHeight,this.prevScroll=this.scrollTop()}update(){}resize(){this.innerHeight=window.innerHeight}scrollTop(e){if(void 0===e)return r("scrollTop",this.el);!function(e,t,n){"scrollTop"===e&&window.scrollTo(0,t)}("scrollTop",e,this.el)}contHeight(){return r("scrollHeight")}smoothScroll(e){(0,o.scrollToY)(e+this.scrollTop(),300)}getContainer(){return this.el}getScroller(){return null}scrollBottom(e){if(void 0===e)return this.contHeight()-this.scrollTop()-this.getScrollHeight();var t=this.contHeight()-e-this.getScrollHeight();this.scrollTop(t)}scrollBottomFixSave(e){var t=Date.now(),n=()=>{Date.now()-t<500&&this.scrollBottom(e),window.removeEventListener("scroll",n)};window.addEventListener("scroll",n),this.scrollBottom(e)}onScroll(e){var t=this.scrollTop(),n=t-this.prevScroll,s=this.contHeight();this.opts.onScroll&&this.opts.onScroll(-n,this),this.opts.scrollChange&&this.opts.scrollChange(t),this.opts.more&&s-t<2*this.innerHeight&&this.opts.more(this),this.prevScroll=t}getScrollHeight(){return this.innerHeight}destroy(){(0,s.destroyModule)(this.module)}}class a{constructor(e,t){this.prevTop=0,this.scroll=new uiScroll(e,{hidden:void 0===t.hidden||t.hidden,shadows:t.shadows,stopScrollPropagation:!1,theme:t.scrollTheme,onmore:()=>t.more&&t.more(this),onscroll:e=>{var n=this.scrollTop(),s=this.prevTop-n;this.prevTop=n,t.scrollChange&&t.scrollChange(n),t.onScroll&&t.onScroll(s,this)}})}update(){this.scroll.update("sync")}scrollTop(e){return void 0!==e?this.scroll.scrollTop(e):this.scroll.data.scrollTop}getContainer(){return this.scroll.content}getScroller(){return this.scroll.scroller}contHeight(){return this.scroll.data.scrollHeight}smoothScroll(e){this.scroll.scrollTop(this.scrollTop()+e,300)}scrollBottom(e){return void 0!==e?this.scroll.scrollBottom(e):this.scroll.data.scrollBottom}scrollBottomFixSave(e){var t=Date.now();this.scroll.emitter.addOnceListener("resize",(()=>{Date.now()-t<500&&this.scroll&&this.scrollBottom(e)})),this.scrollBottom(e)}getScrollHeight(){return this.scroll.data.viewportHeight}destroy(){this.scroll.destroy()}}class l{constructor(e,t){this.el=e}update(){}getContainer(){return this.el}getScroller(){return null}scrollTop(e){return 0}contHeight(){return 0}smoothScroll(e){}scrollBottom(e){return 0}scrollBottomFixSave(e){}getScrollHeight(){return 0}destroy(){}}function d(e,t){return t.noScroll?new l(e):t.nativeScroll?new i(e,t):new a(e,t)}},554846:(e,t,n)=>{n.d(t,{Scroll:()=>a});n(682772);var s=n(785893),o=(n(667294),n(102957)),r=n(934103);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},i.apply(this,arguments)}var a=e=>{var t=e.children,n=function(e,t){if(null==e)return{};var n,s,o={},r=Object.keys(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["children"]);return(0,s.jsx)(o.ScrollContext.Provider,{value:{createScroll:r.createScroll},children:(0,s.jsx)(o.Scroll,i({},n,{children:t}))})};a.defaultProps={isNative:!1,isShadows:!1,neverHide:!1,onScroll:null}},906523:(e,t,n)=>{function s(){return Boolean(window.nav&&window.nav.objLoc&&window.nav.objLoc.claim)}n.d(t,{isClaimContent:()=>s})},287503:(e,t,n)=>{n.d(t,{GroupAdminLevel:()=>s});var s={USER:0,MODERATOR:1,EDITOR:2,ADMINISTRATOR:3,HOST:4,EVENT_CREATOR:5,CREATOR:6,PSEUDO_LEVEL_ADVERTISER:100}},323193:(e,t,n)=>{n.d(t,{BEST_FRIENDS_MAX_COUNT:()=>o,AUTOMATIC_BEST_FRIENDS_FROM_HINTS_COUNT:()=>r,BEST_FRIENDS_SELECT_MODE:()=>s});var s,o=100,r=10;!function(e){e.ADD="add",e.DELETE="delete"}(s||(s={}))},539621:(e,t,n)=>{n.d(t,{BestFriendsConversationsBlock:()=>u});var s=n(570655),o=n(785893),r=n(667294),i=n(293223),a=n(787255),l=n(288420),d=n(652997),c=n(842194),_=n(70162),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,s.__extends)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.conversations,r=t.conversationsShownCount,l=t.showMoreConversations,u=t.onConversationClick,p=t.fromSearch,h=p?n:n.slice(0,r),v=Math.min(n.length-r,5),g=(0,_.getLang)("wall_best_friends_settings_box_conversation_more",v);return(0,o.jsxs)("div",(0,s.__assign)({className:"BestFriendsSettingsBox__chats"},{children:[(0,o.jsx)("div",(0,s.__assign)({className:"BestFriendsSettingsBox__header"},{children:(0,o.jsx)("span",(0,s.__assign)({className:"BestFriendsSettingsBox__sectionTitle"},{children:(0,_.getLang)("wall_best_friends_settings_box_title_chats")}),void 0)}),void 0),h.map((function(t,n){return(0,o.jsx)(a.default,(0,s.__assign)({aside:p?"":e.getButton(t),onClick:function(){return u(t.peerId,!e.isAllFriendsAdded(t)||p,p,p)}},{children:(0,o.jsx)(d.default,{size:"34",title:t.name,description:e.getDescription(t),photo:(0,o.jsx)(i.default,{photos:e.getAvatarImages(t)},void 0)},void 0)}),n)})),!p&&v>0&&(0,o.jsx)(c.ListMore,(0,s.__assign)({className:"BestFriendsSettingsBox__listMore",onClick:l},{children:g}),void 0)]}),void 0)},t.prototype.isAllFriendsAdded=function(e){var t=this;return e.userIds.every((function(e){return t.props.bestFriends.includes(e)}))},t.prototype.getAvatarImages=function(e){var t=this,n=[];return e.photoUrl?n.push(e.photoUrl):e.userIds.slice(0,4).forEach((function(e){var s=t.props.friends.find((function(t){return t.id===e}));s&&n.push(s.photoUrl)})),n},t.prototype.getButton=function(e){var t=(0,_.getLang)("wall_best_friends_settings_box_conversation_add"),n="secondary";return this.isAllFriendsAdded(e)&&(t=(0,_.getLang)("wall_best_friends_settings_box_conversation_cancel"),n="tertiary"),(0,o.jsx)(l.default,(0,s.__assign)({appearance:n,size:"s"},{children:t}),void 0)},t.prototype.getDescription=function(e){return(0,_.getLang)("wall_best_friends_settings_box_conversation_friends_count",e.userIds.length)},t}(r.Component)},763078:(e,t,n)=>{n.d(t,{BestFriendsFriendsBlock:()=>h});var s=n(570655),o=n(785893),r=n(667294),i=n(468916),a=n(814210),l=n(787255),d=n(652997),c=n(91574),_=n(70162),u=n(659397),p=n(323193),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,s.__extends)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.friendsList,r=t.fromSearch,a=t.clearFriends;return(0,o.jsxs)("div",(0,s.__assign)({className:"BestFriendsSettingsBox__friends"},{children:[(0,o.jsxs)("div",(0,s.__assign)({className:"BestFriendsSettingsBox__header"},{children:[(0,o.jsx)("span",(0,s.__assign)({className:"BestFriendsSettingsBox__sectionTitle"},{children:(0,_.getLang)("wall_best_friends_settings_box_title_friends")}),void 0),!r&&(0,o.jsx)(c.default,(0,s.__assign)({className:"BestFriendsSettingsBox__link",onClick:a},{children:(0,_.getLang)("wall_best_friends_settings_box_friends_clear")}),void 0)]}),void 0),(0,o.jsx)(i.default,(0,s.__assign)({className:"BestFriendsSettingsBox__list",loadMore:function(){},hasMore:!1},{children:n.map((function(t){return e.renderItem(t,r)}))}),void 0)]}),void 0)},t.prototype.renderItem=function(e,t){var n=this;void 0===t&&(t=!1);var r=this.props.isSelected(e.id),i=this.props.bestFriends.length>=p.BEST_FRIENDS_MAX_COUNT&&!r,c=t||i,_=(0,u.classNames)("BestFriendsSettingsBox__item",{"BestFriendsSettingsBox__item--disabled":i});return(0,o.jsx)(l.default,(0,s.__assign)({onClick:function(){return n.props.select(e.id,t,t?p.BEST_FRIENDS_SELECT_MODE.ADD:"",t)},aside:c?"":(0,o.jsx)(a.ListMultiSelectControl,{isSelected:r},void 0),className:_,canBeHovered:!i,selectable:!i},{children:(0,o.jsx)(d.default,{size:"34",title:e.name,photo:e.photoUrl},void 0)}),e.id)},t}(r.Component)},782163:(e,t,n)=>{n.d(t,{BestFriendsSettingsBox:()=>b});var s=n(570655),o=n(785893),r=n(667294),i=n(539621),a=n(763078),l=n(41929),d=n(878517),c=n(213984),_=n(288420),u=n(118690),p=n(70162),h=n(146143),v=n(501389),g=n(315720),f=n(897449),S=n(323193),m=n(880235),b=function(e){function t(t){var n=e.call(this,t)||this;n.onClickSave=function(){(0,m.sendBestFriendsAnalytic)(m.BestFriendsEventType.saveBestFriendsList);var e=function(e){(0,m.sendBestFriendsAnalytic)(m.BestFriendsEventType.updatePopupSave);var t=n.props.onSave;n.setState({isSaving:!0}),window.ajax.post("al_wall.php",{act:"edit_best_friends",batch:JSON.stringify(n.state.batchItems),hash:n.props.hash},{onDone:function(){var e;n.setState({isSaving:!1}),null===(e=(0,v.curBox)())||void 0===e||e.hide(),t&&t(n.state.bestFriends.length)},onFail:function(e){var t;return(0,h.showFastBox)((0,p.getLang)("global_error"),e||(0,p.getLang)("global_unknown_error")),n.setState({isSaving:!1}),null===(t=(0,v.curBox)())||void 0===t||t.hide(),!0},showProgress:function(){return(0,f.lockButton)(e)},hideProgress:function(){return(0,f.unlockButton)(e)}})};if(0===n.state.bestFriends.length)e(null);else{var t='\n        <div class="BestFriendsSettingsBoxConfirm">\n          <span class="BestFriendsSettingsBoxConfirm__title">'+(0,p.getLang)("wall_best_friends_settings_box_confirm_save")+'</span>\n          <span class="BestFriendsSettingsBoxConfirm__text">'+(0,p.getLang)("wall_best_friends_settings_box_confirm_save_text")+"</span>\n        </div>\n      ";(0,h.showFastBox)((0,p.getLang)("wall_best_friends_settings_box_confirm_title"),t,(0,p.getLang)("global_save"),e,(0,p.getLang)("global_cancel"),(function(){var e;null===(e=(0,v.curBox)())||void 0===e||e.hide(),(0,m.sendBestFriendsAnalytic)(m.BestFriendsEventType.updatePopupCancel)}))}},n.showMoreConversations=function(){(0,m.sendBestFriendsAnalytic)(m.BestFriendsEventType.moreChats),n.setState({conversationsShownCount:n.state.conversationsShownCount+5})},n.isSelected=function(e){return n.state.bestFriends.includes(e)},n.select=function(e,t,o,r){r&&(0,m.sendBestFriendsAnalytic)(m.BestFriendsEventType.selectFriendFromSearch);var i=n.state,a=i.batchItems,l=i.friendsSorted,d=o===S.BEST_FRIENDS_SELECT_MODE.ADD;Array.isArray(e)||(e=[e]);var c=l.slice(),_=a.slice();e.forEach((function(e){var o=n.isSelected(e),r=n.getBestFriendsFromBatch(_).length;if(o||!(r>=S.BEST_FRIENDS_MAX_COUNT)){if(!d||!o){var i=_.findIndex((function(t){return t.user_id===e}));-1!==i?_.splice(i,1):_.push({op:o?S.BEST_FRIENDS_SELECT_MODE.DELETE:S.BEST_FRIENDS_SELECT_MODE.ADD,user_id:e})}if(t){var a=c.findIndex((function(t){return t.id===e}));c.unshift.apply(c,(0,s.__spreadArray)([],(0,s.__read)(c.splice(a,1)),!1))}}})),n.setState({searchQuery:"",bestFriends:n.getBestFriendsFromBatch(_),batchItems:_,friendsSorted:c})},n.clearFriends=function(){n.select(n.state.bestFriends),(0,m.sendBestFriendsAnalytic)(m.BestFriendsEventType.clear)},n.onConversationClick=function(e,t,o,r){var i=n.state.conversationsSorted,a=n.getConversationByPeerId(e);if(a){var l=i.slice(),d=n.state.conversationsShownCount;if(o){var c=l.map((function(e){return e.peerId})).indexOf(e);l.unshift.apply(l,(0,s.__spreadArray)([],(0,s.__read)(l.splice(c,1)),!1)),c+1>d&&(d+=1)}t&&(r?(0,m.sendBestFriendsAnalytic)(m.BestFriendsEventType.selectChatFromSearch):(0,m.sendBestFriendsAnalytic)(m.BestFriendsEventType.addFriendsFromChat)),n.setState({conversationsSorted:l,conversationsShownCount:d},(function(){var e=t?S.BEST_FRIENDS_SELECT_MODE.ADD:S.BEST_FRIENDS_SELECT_MODE.DELETE;n.select(a.userIds,t,e)}))}};var o=t.conversations,r=t.bestFriends;return n.state={isSaving:!1,searchQuery:"",friendsSorted:n.getFilteredFriendsList(),conversationsSorted:o,conversationsShownCount:2,bestFriends:r,batchItems:[]},n.initIndexer(),n}return(0,s.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=e.friendsSorted;e.bestFriends.length||this.select(t.slice(0,S.AUTOMATIC_BEST_FRIENDS_FROM_HINTS_COUNT).map((function(e){return e.id})),!1,S.BEST_FRIENDS_SELECT_MODE.ADD)},t.prototype.render=function(){var e=this,t=this.state.searchQuery,n=this.getFilteredData(),r=n.friendsSorted,i=n.conversationsSorted,a=this.props,c=a.onClose,_=0===a.friends.length,u=t&&!r.length&&!i.length;return(0,o.jsxs)(l.BoxModal,(0,s.__assign)({className:"BestFriendsSettingsBox",appearance:"white",hasScroll:!1,title:this.getHeader(),actionButtons:this.getActionModalButtons(),hint:this.getHint(),onClose:c},{children:[(0,o.jsx)(d.BlockSearchInput,{className:"BestFriendsSettingsBox__search",onChange:function(t){return e.setState({searchQuery:t.target.value})},placeholder:(0,p.getLang)("wall_best_friends_settings_box_search_placeholder"),autoFocus:!0,value:t},"search"),_||u?this.renderNotFound(_):this.renderContent(r,i,Boolean(t))]}),void 0)},t.prototype.renderNotFound=function(e){var t=e?(0,p.getLang)("wall_best_friends_settings_no_friends"):(0,p.getLang)("wall_search_nothing_found");return(0,o.jsx)("div",(0,s.__assign)({className:"BestFriendsSettingsBox__notFound"},{children:t}),void 0)},t.prototype.renderContent=function(e,t,n){return void 0===n&&(n=!1),(0,o.jsxs)("div",(0,s.__assign)({className:"BestFriendsSettingsBox__inner"},{children:[Boolean(t.length)&&(0,o.jsx)(i.BestFriendsConversationsBlock,{conversations:t,conversationsShownCount:this.state.conversationsShownCount,showMoreConversations:this.showMoreConversations,onConversationClick:this.onConversationClick,fromSearch:n,bestFriends:this.state.bestFriends,friends:this.state.friendsSorted},void 0),Boolean(e.length)&&(0,o.jsx)(a.BestFriendsFriendsBlock,{bestFriends:this.state.bestFriends,fromSearch:n,friendsList:e,select:this.select,isSelected:this.isSelected,clearFriends:this.clearFriends},void 0)]}),void 0)},t.prototype.initIndexer=function(){var e=this.props,t=e.friends,n=e.conversations;this.indexedFriends=new g.vkIndexer(t,(function(e){return[e.name,e.domain].filter(Boolean).join(" ")})),this.indexedConversations=new g.vkIndexer(n,(function(e){return e.name}))},t.prototype.getFilteredFriendsList=function(){var e=this.props,t=e.friends,n=e.bestFriends;return(0,s.__spreadArray)((0,s.__spreadArray)([],(0,s.__read)(n.map((function(e){return t.find((function(t){return t.id===e}))}))),!1),(0,s.__read)(t.filter((function(e){return!n.includes(e.id)}))),!1).filter((function(e){return e}))},t.prototype.getFilteredData=function(){var e=this.state,t=e.searchQuery,n=e.friendsSorted,s=e.conversationsSorted;return t&&(n=this.indexedFriends.search(t),s=this.indexedConversations.search(t)),{friendsSorted:n,conversationsSorted:s}},t.prototype.getHeader=function(){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",(0,s.__assign)({className:"BestFriendsSettingsBox__title"},{children:(0,p.getLang)("wall_best_friends_settings_box_title")}),void 0),(0,o.jsx)("span",(0,s.__assign)({className:"BestFriendsSettingsBox__subtitle"},{children:(0,o.jsx)(c.default,{children:(0,p.getLang)("wall_best_friends_settings_box_subtitle")},void 0)}),void 0)]},void 0)},t.prototype.getActionModalButtons=function(){var e=this.props.onClose,t=this.state.isSaving;return[(0,o.jsx)(_.default,(0,s.__assign)({appearance:"tertiary",onClick:function(){return e()}},{children:(0,p.getLang)("global_cancel")}),"close"),(0,o.jsx)(u.default,(0,s.__assign)({appearance:"primary",onClick:this.onClickSave,loading:t,disabled:this.compareBestFriendsList()},{children:(0,p.getLang)("global_save")}),"publish")]},t.prototype.getHint=function(){var e=this.state.bestFriends;return e.length?(0,p.getLang)("wall_best_friends_settings_box_friends_count",e.length):""},t.prototype.compareBestFriendsList=function(){var e=this.props.bestFriends,t=this.state.bestFriends;return e.length===t.length&&e.every((function(e){return t.includes(e)}))},t.prototype.getConversationByPeerId=function(e){return this.state.conversationsSorted.find((function(t){return t.peerId===e}))},t.prototype.getBestFriendsFromBatch=function(e){var t=this.props.bestFriends.slice();return e.forEach((function(e){e.op===S.BEST_FRIENDS_SELECT_MODE.DELETE?t.splice(t.indexOf(e.user_id),1):t.push(e.user_id)})),t},t}(r.Component)},393797:(e,t,n)=>{n.d(t,{bestFriendsBoxSettings:()=>c});var s=n(785893),o=n(782163),r=n(261508),i=n(70162),a=n(146143),l=n(66433),d=n(501389),c=function(e){window.ajax.post("al_wall.php",{act:"get_best_friends_box_data"},{loader:!0,onDone:function(t,n,a,l){(0,r.showComponentInBox)((0,s.jsx)(o.BestFriendsSettingsBox,{friends:t,bestFriends:n,conversations:a,hash:l,onClose:function(){var e;return null===(e=(0,d.curBox)())||void 0===e?void 0:e.hide()},onSave:function(t){var n;e&&e(t);var s=(0,i.getLang)("wall_best_friends_settings_box_saved"),o=(0,i.getLang)("wall_best_friends_settings_box_saved_text");0===t&&(s=(0,i.getLang)("wall_best_friends_settings_box_saved_empty"),o=(0,i.getLang)("wall_best_friends_settings_box_saved_empty_text")),(0,d.showDoneBox)('<div class="top_result_header">'+s+"</div>"+o),null===(n=(0,d.curBox)())||void 0===n||n.hide()}},void 0),{width:450,onDestroy:function(e){(0,r.destroyComponentInBox)(e)}})},onFail:function(e){return(0,a.showFastBox)((0,i.getLang)("global_error"),e||(0,i.getLang)("global_unknown_error")),(0,l.logError)(new Error("get_best_friends_box_data error"+(e?": "+e:""))),!0}})}},41929:(e,t,n)=>{n.d(t,{BoxModal:()=>l});var s=n(570655),o=n(785893),r=n(667294),i=n(483295),a=n(781402),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,s.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.appearance,r=e.title,l=e.actionButtons,d=e.onClose,c=e.children,_=e.hint,u=e.hasScroll;return(0,o.jsx)("div",(0,s.__assign)({className:"BoxModal"},{children:(0,o.jsxs)("div",(0,s.__assign)({className:(0,i.classNames)("Modal","Modal--"+n,t)},{children:[(0,o.jsx)(a.default.Header,{title:r,onClose:d},void 0),Boolean(c)&&(0,o.jsx)(a.default.Body,(0,s.__assign)({hasScroll:u},{children:c}),void 0),Boolean(l)&&(0,o.jsx)(a.default.Footer,{actionButtons:l,hint:_},void 0)]}),void 0)}),void 0)},t.defaultProps={appearance:"white",hasScroll:!0},t}(r.Component)},222519:(e,t,n)=>{n.d(t,{TOOLTIP_SUCCESS_EVENT:()=>o,TooltipEventService:()=>r});var s=n(340189),o="group_tooltip_success_event",r={onUploadAvatar:function(){window.dispatchEvent(new CustomEvent(o,{detail:s.OnboardingTooltipIds.Avatar}))},onUploadCover:function(){window.dispatchEvent(new CustomEvent(o,{detail:s.OnboardingTooltipIds.Cover}))},onAddPost:function(){window.dispatchEvent(new CustomEvent(o,{detail:s.OnboardingTooltipIds.Post}))},onAddMarketItem:function(){window.dispatchEvent(new CustomEvent(o,{detail:s.OnboardingTooltipIds.MarketItem}))},onAddServiceItem:function(){window.dispatchEvent(new CustomEvent(o,{detail:s.OnboardingTooltipIds.ServiceItem}))}}},340189:(e,t,n)=>{var s;n.d(t,{OnboardingTooltipIds:()=>s}),function(e){e.Avatar="business_groups_web:avatar",e.Cover="business_groups_web:cover",e.ActionButton="business_groups_web:action_button",e.MarketItem="business_groups_web:add_item",e.ServiceItem="business_groups_web:add_service",e.Post="business_groups_web:make_post"}(s||(s={}))},781119:(e,t,n)=>{var s=n(874687);window.openPostPrivacyModal=s.openPostPrivacyModal;try{window.stManager.done(window.jsc("web/post_privacy_modal.js"))}catch(e){}},610124:(e,t,n)=>{n.d(t,{createMutations:()=>i,createModule:()=>d,destroyModule:()=>c});var s=n(570655),o=n(719711),r=n(152278);function i(e){return{callMutations:function(){if("function"==typeof e)throw console.trace(),new Error("Mutations are not initialized");return e},bindMutations:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if("function"!=typeof e)throw console.trace(),new Error("Mutations are already initialized");return e=e.apply(void 0,(0,s.__spreadArray)([],(0,s.__read)(t),!1))}}}function a(e,t,n,s){(0,r.addEvent)(t,n,s),e._registeredHandlers.push({handlerType:"bind",elem:t,types:n,handler:s})}function l(e,t,n,s,r,i){(0,o.addDelegateEvent)(t,n,s,r,i),e._registeredHandlers.push({handlerType:"delegate",elem:t,types:n,selector:s,handler:r})}function d(e){var t={_registeredHandlers:[]};return e.handlers((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return a.apply(void 0,(0,s.__spreadArray)([t],(0,s.__read)(e),!1))}),(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return l.apply(void 0,(0,s.__spreadArray)([t],(0,s.__read)(e),!1))})),t}function c(e){e._registeredHandlers.forEach((function(e){var t=e.handlerType,n=e.elem,s=e.types,i=e.handler;"delegate"===t?(0,o.removeDelegateEvent)(n,s,e.selector,i):(0,r.removeEvent)(n,s,i)})),e._registeredHandlers=[]}},398630:(e,t,n)=>{n.d(t,{PRIVACY_MODAL_MODES:()=>h,PrivacyModal:()=>S});var s=n(570655),o=n(785893),r=n(880235),i=n(393797),a=n(213984),l=n(288420),d=n(740448),c=n(879622),_=n(342269),u=n(70162),p=n(733024),h={BEST_FRIENDS_ENTRYPOINT:"bestFriendsEntrypoint",CHOOSE_BEST_FRIENDS:"chooseBestFriends",CREATE_POST_FOR_BEST_FRIENDS:"createPostForBestFriends",CREATE_POST_FOR_FRIENDS:"createPostForFriends",OWN_POST_FOR_BEST_FRIENDS:"ownPostForBestFriends",OWN_POST_FOR_BEST_FRIENDS_EMPTY:"ownPostForBestFriendsEmpty",OWN_POST_FOR_FRIENDS:"ownPostForFriends"},v="best_friends_only",g="friends_only",f=function(e){var t=new URLSearchParams({post_privacy:e,own:1,new_post:1}).toString();return"/wall"+window.vk.id+"?"+t},S=function(e){var t=e.mode,n=e.name,S=e.sex,m=e.onClose,b=function(e,t,n,s){var o="",a="",l="",p=function(){},S=function(e){(0,r.sendBestFriendsAnalytic)(r.BestFriendsEventType.editBestFriendsFromPopup),s(),(0,i.bestFriendsBoxSettings)((function(t){if(0!==t)if(e)window.open(f(v));else{var n=document.getElementById("best_friends_only");if(n){var s=(0,u.getLang)("wall_best_friends_settings_box_conversation_friends_count",t);n.innerHTML=(0,_.getTemplate)("visibility_access_best_friends_only_option",{html:(0,_.getTemplate)("visibility_access_best_friends_only_item",{count_text:s}),count:t}),d.default.showEditPost(),d.default.togglePostVisibilityAccess(n,c.VISIBILITY_ACCESS_OPTIONS.ONLY_BEST_FRIENDS,"",!0);var o=document.querySelector(".BestFriendsSettingsEntrypoint");null==o||o.remove()}}}))};switch(e){case h.BEST_FRIENDS_ENTRYPOINT:o=(0,u.getLang)("wall_privacy_modal_best_friends_own_title"),a=(0,u.getLang)("wall_privacy_modal_best_friends_own_text"),l=(0,u.getLang)("wall_privacy_modal_choose_best_friends_button"),p=S;break;case h.CHOOSE_BEST_FRIENDS:o=(0,u.langSex)(n,(0,u.getLang)("wall_privacy_modal_best_friends_title","raw")).replace("{name}",t),a=(0,u.getLang)("wall_privacy_modal_choose_best_friends_text"),l=(0,u.getLang)("wall_privacy_modal_choose_best_friends_button"),p=function(){return S(!0)};break;case h.CREATE_POST_FOR_BEST_FRIENDS:o=(0,u.langSex)(n,(0,u.getLang)("wall_privacy_modal_best_friends_title","raw")).replace("{name}",t),a=(0,u.getLang)("wall_privacy_modal_best_friends_text"),l=(0,u.getLang)("wall_privacy_modal_create_post_button"),p=function(){(0,r.sendBestFriendsAnalytic)(r.BestFriendsEventType.createPostFromPopupBest),window.open(f(v)),s()};break;case h.CREATE_POST_FOR_FRIENDS:o=(0,u.langSex)(n,(0,u.getLang)("wall_privacy_modal_friends_title","raw")).replace("{name}",t),a=(0,u.getLang)("wall_privacy_modal_friends_text"),l=(0,u.getLang)("wall_privacy_modal_create_post_button"),p=function(){(0,r.sendBestFriendsAnalytic)(r.BestFriendsEventType.createPostFromPopupFriends),window.open(f(g)),s()};break;case h.OWN_POST_FOR_BEST_FRIENDS:o=(0,u.getLang)("wall_privacy_modal_own_post_for_best_friends_title"),a=(0,u.getLang)("wall_privacy_modal_own_post_for_best_friends_text"),l=(0,u.getLang)("wall_privacy_modal_create_post_more_button"),p=function(){(0,r.sendBestFriendsAnalytic)(r.BestFriendsEventType.createPostFromPopupBest),window.open(f(v)),s()};break;case h.OWN_POST_FOR_BEST_FRIENDS_EMPTY:o=(0,u.getLang)("wall_privacy_modal_own_post_for_best_friends_empty_title"),a=(0,u.getLang)("wall_privacy_modal_own_post_for_best_friends_empty_text"),l=(0,u.getLang)("wall_privacy_modal_choose_best_friends_button"),p=function(){return S(!0)};break;case h.OWN_POST_FOR_FRIENDS:o=(0,u.getLang)("wall_privacy_modal_own_post_for_friends_title"),a=(0,u.getLang)("wall_privacy_modal_own_post_for_friends_text"),l=(0,u.getLang)("wall_privacy_modal_create_post_more_button"),p=function(){(0,r.sendBestFriendsAnalytic)(r.BestFriendsEventType.createPostFromPopupFriends),window.open(f(g)),s()}}return{title:o,text:a,buttonText:l,action:p}}(t,n,S,m),E=b.title,y=b.text,w=b.buttonText,F=b.action;return(0,o.jsxs)("div",(0,s.__assign)({className:"PrivacyModal__box"},{children:[(0,o.jsx)("span",(0,s.__assign)({className:"PrivacyModal__close",onClick:m},{children:(0,o.jsx)(p.default,{},void 0)}),void 0),(0,o.jsx)("h3",(0,s.__assign)({className:"PrivacyModal__title"},{children:E}),void 0),(0,o.jsx)(a.default,(0,s.__assign)({element:"div",className:"PrivacyModal__text"},{children:y}),void 0),(0,o.jsx)(l.default,(0,s.__assign)({className:"PrivacyModal__button",size:"m",onClick:function(){return F()}},{children:w}),void 0)]}),void 0)}},874687:(e,t,n)=>{n.d(t,{openPostPrivacyModal:()=>a});var s=n(785893),o=n(880235),r=n(261508),i=n(398630),a=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n=0);var a=[i.PRIVACY_MODAL_MODES.CHOOSE_BEST_FRIENDS,i.PRIVACY_MODAL_MODES.CREATE_POST_FOR_BEST_FRIENDS,i.PRIVACY_MODAL_MODES.OWN_POST_FOR_BEST_FRIENDS,i.PRIVACY_MODAL_MODES.OWN_POST_FOR_BEST_FRIENDS_EMPTY].includes(e),l=[i.PRIVACY_MODAL_MODES.CREATE_POST_FOR_FRIENDS,i.PRIVACY_MODAL_MODES.OWN_POST_FOR_FRIENDS].includes(e);a?(0,o.sendBestFriendsAnalytic)(o.BestFriendsEventType.clickToLockBestFriends):l?(0,o.sendBestFriendsAnalytic)(o.BestFriendsEventType.clickToLockFriends):e===i.PRIVACY_MODAL_MODES.BEST_FRIENDS_ENTRYPOINT&&(0,o.sendBestFriendsAnalytic)(o.BestFriendsEventType.clickToBestFriendsEntrypoint);var d={containerClass:"PrivacyModal",width:450,onDestroy:function(e){(0,r.destroyComponentInBox)(e)}};(0,r.showComponentInBox)((0,s.jsx)(i.PrivacyModal,{mode:e,name:t,sex:n,onClose:function(){(0,r.destroyComponentInBox)(!0)}},void 0),d)}},186699:(e,t,n)=>{n.d(t,{ReportReasonIds:()=>h,showReportForm:()=>g,afterCommentReportSubmit:()=>f});var s,o,r=n(570655),i=n(785893),a=n(769488),l=n(70162),d=n(196022),c=n(189798),_=n(448632),u=n(548838),p=n(856330);(0,d.makeAuthAndApiGlobal)();var h,v=window.vk;function g(e,t,s,o,a){var l=(0,u.asyncComponent)((function(){return Promise.all([n.e(24509),n.e(98066),n.e(68592),n.e(29019)]).then(n.bind(n,71018))}),(function(e){return e.ReportForm}));(0,p.showMessageBoxModalSuspense)((function(n){return(0,i.jsx)(l,(0,r.__assign)({},n,{reportSource:e,reportSourceOwnerId:t,reportSourceId:s,onSubmit:o}),void 0)}),{onDestroy:a})}function f(e,t,n){var s=function(e,t,n){switch(e){case"photo":return"#post"+t+"photo_"+n;case"video":return"#post"+t+"video_"+n+"mv";case"market":return"#post"+t+"market_"+n}}(e,t,n);if("photo"===e){var o=document.querySelector(s+" .dld");null!==o&&(o.outerHTML="")}var r=document.querySelector(s+" .reply_wrap");null!==r?(r.style.display="none",r.outerHTML+='<div class="dld">'+(0,l.getLang)("global_report_sent")+"</div>"):(0,a.debugLog)("Unable to hide report button for "+e+" comment")}(0,c.setLoginConfig)({onCaptcha:_.handleCaptcha,domain:null===(s=null==v?void 0:v.apiConfigDomains)||void 0===s?void 0:s.loginDomain}),(0,c.setApiConfig)({onCaptcha:_.handleCaptcha,domain:null===(o=null==v?void 0:v.apiConfigDomains)||void 0===o?void 0:o.apiDomain}),function(e){e[e.NotOriginalContent=28]="NotOriginalContent"}(h||(h={}))},175382:(e,t,n)=>{n.d(t,{floatingButtonCollapseAllRepliesHide:()=>r,floatingButtonCollapseAllRepliesShow:()=>i,loadRepliesLinkShow:()=>a,loadRepliesLinkIsVisible:()=>l,highlightUpdatedReply:()=>d,highlightUpdatedReplyContent:()=>c});var s=n(830104),o=n(873589),r=function(e){e instanceof HTMLElement&&e.classList.contains("replies_side")&&e.classList.add("replies_side_hidden")},i=function(e){e instanceof HTMLElement&&e.classList.contains("replies_side")&&e.classList.remove("replies_side_hidden")},a=function(e){e instanceof HTMLElement&&e.classList.contains("replies_next")&&e.classList.add("replies_next_shown")},l=function(e){return!!(e instanceof HTMLElement&&e.classList.contains("replies_next"))&&(e.classList.contains("replies_next_shown")||(0,o.isVisible)(e))},d=function(e){(0,s.triggerAnimationClass)(e,"reply_highlight_updated",3e3)},c=function(e){(0,s.triggerAnimationClass)(e,"reply_highlight_updated_content",3e3)}}},a={};function l(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={id:e,loaded:!1,exports:{}};return i[e].call(n.exports,n,n.exports,l),n.loaded=!0,n.exports}l.m=i,e=[],l.O=(t,n,s,o)=>{if(!n){var r=1/0;for(c=0;c<e.length;c++){for(var[n,s,o]=e[c],i=!0,a=0;a<n.length;a++)(!1&o||r>=o)&&Object.keys(l.O).every((e=>l.O[e](n[a])))?n.splice(a--,1):(i=!1,o<r&&(r=o));if(i){e.splice(c--,1);var d=s();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,s,o]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,s){if(1&s&&(e=this(e)),8&s)return e;if("object"==typeof e&&e){if(4&s&&e.__esModule)return e;if(16&s&&"function"==typeof e.then)return e}var o=Object.create(null);l.r(o);var r={};t=t||[null,n({}),n([]),n(n)];for(var i=2&s&&e;"object"==typeof i&&!~t.indexOf(i);i=n(i))Object.getOwnPropertyNames(i).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,l.d(o,r),o},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,n)=>(l.f[n](e,t),t)),[])),l.u=e=>9375===e?"voice_message_player.f7f6ec3014f8bf787c7e.js":28762===e?"speech.ec5bb88b79217da0bc5d.js":57468===e?"SilentModeForms.33608795033584268535.js":75980===e?"menu_settings.0f17151bd588fe6a5267.js":29019===e?"ReportForm.f8c590fa8597e2e77eb2.js":77806===e?"apps_attach_modal.f977a78b48abe855da31.js":55489===e?"lottie-light.19743fa6c7bec04c41d3.js":1847===e?"81939c11b638ba380c21f8b8cf27a5b9.1aa2c16482a95fe995d0.js":38288===e?"lottie.7d914fa3404556039ac3.js":void 0,l.miniCssF=e=>e+"."+{29019:"087723bb01fde7b85808",57468:"d9fcc825987a206f0097",75980:"3a98749ca45868f84306",77806:"8c938cf7c5c8536a23fb"}[e]+".css",l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s={},l.l=(e,t,n,o)=>{if(s[e])s[e].push(t);else{var r,i;if(void 0!==n)for(var a=document.getElementsByTagName("script"),d=0;d<a.length;d++){var c=a[d];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")=="vk:"+n){r=c;break}}r||(i=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,l.nc&&r.setAttribute("nonce",l.nc),r.setAttribute("data-webpack","vk:"+n),r.src=e),s[e]=[t];var _=(t,n)=>{r.onerror=r.onload=null,clearTimeout(u);var o=s[e];if(delete s[e],r.parentNode&&r.parentNode.removeChild(r),o&&o.forEach((e=>e(n))),t)return t(n)},u=setTimeout(_.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=_.bind(null,r.onerror),r.onload=_.bind(null,r.onload),i&&document.head.appendChild(r)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),l.p="/dist/",o=e=>new Promise(((t,n)=>{var s=l.miniCssF(e),o=l.p+s;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),s=0;s<n.length;s++){var o=(i=n[s]).getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(o===e||o===t))return i}var r=document.getElementsByTagName("style");for(s=0;s<r.length;s++){var i;if((o=(i=r[s]).getAttribute("data-href"))===e||o===t)return i}})(s,o))return t();((e,t,n,s)=>{var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.onerror=o.onload=r=>{if(o.onerror=o.onload=null,"load"===r.type)n();else{var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=i,l.request=a,o.parentNode.removeChild(o),s(l)}},o.href=t,document.head.appendChild(o)})(e,o,t,n)})),r={2884:0},l.f.miniCss=(e,t)=>{r[e]?t.push(r[e]):0!==r[e]&&{29019:1,57468:1,75980:1,77806:1}[e]&&t.push(r[e]=o(e).then((()=>{r[e]=0}),(t=>{throw delete r[e],t})))},(()=>{var e={2884:0};l.f.j=(t,n)=>{var s=l.o(e,t)?e[t]:void 0;if(0!==s)if(s)n.push(s[2]);else if(75980!=t){var o=new Promise(((n,o)=>s=e[t]=[n,o]));n.push(s[2]=o);var r=l.p+l.u(t),i=new Error;l.l(r,(n=>{if(l.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var o=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;i.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",i.name="ChunkLoadError",i.type=o,i.request=r,s[1](i)}}),"chunk-"+t,t)}else e[t]=0},l.O.j=t=>0===e[t];var t=(t,n)=>{var s,o,[r,i,a]=n,d=0;for(s in i)l.o(i,s)&&(l.m[s]=i[s]);if(a)var c=a(l);for(t&&t(n);d<r.length;d++)o=r[d],l.o(e,o)&&e[o]&&e[o][0](),e[r[d]]=0;return l.O(c)},n=self.webpackChunkvk=self.webpackChunkvk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var d=l.O(void 0,[76429,75514,24509,56990,98066,76400,40885,68592,59302,85820,83063],(()=>l(781119)));d=l.O(d)})();